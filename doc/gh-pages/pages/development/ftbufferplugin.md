---
title: MNE-SCAN FieldTrip Buffer Plugin
parent: Develop
nav_order: 7
---

# MNE-SCAN FieldTrip Buffer Plugin

The plugin is meant to interface with a FieldTrip Buffer already running at a given address. It does not implement the buffer itself, only a client.

## Running with Neuromag

1. Set up .fif file on client computer

   Obtain a fif file generated by the neuromag with current sampling parameters and place it in the folder from which you run MNE-SCAN. Name that file `neuromag2ft.fif`. This is usually under `/mne-cpp/bin`.

2. Download FieldTrip Neuromag2ft on Acquisition Computer

   Download the source code either from their [website](http://www.fieldtriptoolbox.org/download/) or their [github page](https://github.com/fieldtrip/fieldtrip). We need to run `neuromag2ft` on the acquisition computer for the neuromag. Depending on your system, you might have to build it locally. You can do so by running the makefile in `/realtime/src/acquisition/neuromag/` with the command `make`, or follow the documentation on the fieldtrip buffer website.

4. Run neuromag2ft

   `neuromag2ft` can be run with different parameters, but for this example we will be running it with all default settings. For more options, run it with the `--help` flag. Run the executable in `/realtime/src/acquisition/neuromag/bin/<YOUR_OS>`. This should both create a buffer and start an interface with the neuromag.

5. Set up plugin:

   Run MNE-Scan and select the FtBuffer plugin from the toolbar on the left. Set the buffer address and port and click the 'Set' button. This does not start any connection or communication with the buffer, it only stores the values inputted in the 'Address' and 'Port' fields. At this stage the fif file gets loaded and used to set the plugin's output parameters.

6. Send and receive data:

   In MNE-Scan, click the green start button on the top left to start the plugin. This can be done before or after the data collection starts, but the fieldtrip buffer has a limited memory and will start dropping the oldest stored data samples once it starts running out. For best results, have the client plugin running before recording starts, or start it soon after.

-------------------
