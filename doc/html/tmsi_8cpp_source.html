<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>MNE-CPP: D:/GitHub/mne-cpp/applications/mne_x/plugins/tmsi/tmsi.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MNE-CPP
   &#160;<span id="projectnumber">beta 0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a6e4fee11f07c3b70486e88fe92cbbdc.html">applications</a></li><li class="navelem"><a class="el" href="dir_362befb8814e314b111c15c41bbf89c8.html">mne_x</a></li><li class="navelem"><a class="el" href="dir_d89ede2d7d689617264fddf77707cd4c.html">plugins</a></li><li class="navelem"><a class="el" href="dir_742ad9d401ea4dddcb05337fe3ee40d2.html">tmsi</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">tmsi.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tmsi_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span><span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// INCLUDES</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tmsi_8h.html">tmsi.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tmsiproducer_8h.html">tmsiproducer.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// QT INCLUDES</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;QtCore/QtPlugin&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;QtCore/QTextStream&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// USED NAMESPACES</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">using namespace </span>TMSIPlugin;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// DEFINE MEMBER METHODS</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//=============================================================================================================</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af05f662f0cf7db2650b4322049e8d640">   69</a></span>&#160;<a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af05f662f0cf7db2650b4322049e8d640">TMSI::TMSI</a>()</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;: m_pRMTSA_TMSI(0)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;, m_qStringResourcePath(qApp-&gt;applicationDirPath()+<span class="stringliteral">&quot;/mne_x_plugins/resources/tmsi/&quot;</span>)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;, m_pRawMatrixBuffer_In(0)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;, m_pTMSIProducer(new <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i_producer.html">TMSIProducer</a>(this))</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a0e87eb5c7f6232c29123e40099897c6b">   80</a></span>&#160;<a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a0e87eb5c7f6232c29123e40099897c6b">TMSI::~TMSI</a>()</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">//std::cout &lt;&lt; &quot;TMSI::~TMSI() &quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">//If the program is closed while the sampling is in process</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span>(this-&gt;isRunning())</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        this-&gt;<a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af9a3f343b5d13c3d899f79789088a30b">stop</a>();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ab4d4fa2c0d3dbdb594db1c1edb5f6c93">   92</a></span>&#160;QSharedPointer&lt;IPlugin&gt; <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ab4d4fa2c0d3dbdb594db1c1edb5f6c93">TMSI::clone</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    QSharedPointer&lt;TMSI&gt; pTMSIClone(<span class="keyword">new</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af05f662f0cf7db2650b4322049e8d640">TMSI</a>());</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> pTMSIClone;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a3ed500b9d8fd1d825c9ee72ce717952e">  101</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a3ed500b9d8fd1d825c9ee72ce717952e">TMSI::init</a>()</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    m_pRMTSA_TMSI = <a class="code" href="class_m_n_e_x_1_1_plugin_output_data.html#a52a436ad77f0236e54e737665bf038f6">PluginOutputData&lt;NewRealTimeMultiSampleArray&gt;::create</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;TMSI&quot;</span>, <span class="stringliteral">&quot;EEG output data&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="class_m_n_e_x_1_1_i_plugin.html#a9ab1fe463c2984418c495fafe96d6f84">m_outputConnectors</a>.append(m_pRMTSA_TMSI);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">//default values used by the setupGUI class must be set here</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    m_iSamplingFreq = 1024;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    m_iNumberOfChannels = 138;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    m_iSamplesPerBlock = 16;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    m_iTriggerInterval = 5000;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    m_bUseChExponent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    m_bUseUnitGain = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    m_bUseUnitOffset = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    m_bWriteToFile = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    m_bWriteDriverDebugToFile = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    m_bUseFiltering = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    m_bUseFFT = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    m_bIsRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    m_bBeepTrigger = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    m_bUseCommonAverage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    m_bUseKeyboardTrigger = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    m_iTriggerType = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    m_sOutputFilePath = QString(<span class="stringliteral">&quot;./mne_x_plugins/resources/tmsi/EEG_data_001_raw.fif&quot;</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    m_sElcFilePath = QString(<span class="stringliteral">&quot;./mne_x_plugins/resources/tmsi/loc_files/Lorenz-Duke128-28-11-2013.elc&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    m_pFiffInfo = QSharedPointer&lt;FiffInfo&gt;(<span class="keyword">new</span> <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_info.html">FiffInfo</a>());</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">//Initialise matrix used to perform a very simple high pass filter operation</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    m_matOldMatrix = MatrixXf::Zero(m_iNumberOfChannels, m_iSamplesPerBlock);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#aad5595b85f4d3d371d4d6ccddebe5719">  139</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#aad5595b85f4d3d371d4d6ccddebe5719">TMSI::setUpFiffInfo</a>()</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">//Clear old fiff info data</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    m_pFiffInfo-&gt;clear();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">//Set number of channels, sampling frequency and high/-lowpass</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    m_pFiffInfo-&gt;nchan = m_iNumberOfChannels;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    m_pFiffInfo-&gt;sfreq = m_iSamplingFreq;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    m_pFiffInfo-&gt;highpass = (float)0.001;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    m_pFiffInfo-&gt;lowpass = m_iSamplingFreq/2;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">//Read electrode positions from .elc file</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="class_u_t_i_l_s_l_i_b_1_1_as_a_elc.html">AsAElc</a> *asaObject = <span class="keyword">new</span> <a class="code" href="class_u_t_i_l_s_l_i_b_1_1_as_a_elc.html">AsAElc</a>();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    QVector&lt; QVector&lt;double&gt; &gt; elcLocation3D;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    QVector&lt; QVector&lt;double&gt; &gt; elcLocation2D;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    QString unit;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    QStringList elcChannelNames;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span>(!asaObject-&gt;<a class="code" href="class_u_t_i_l_s_l_i_b_1_1_as_a_elc.html#affa1d3af83b8a7ab40d8842c30124df5">readElcFile</a>(m_sElcFilePath, elcChannelNames, elcLocation3D, elcLocation2D, unit))</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Error: Reading elc file.&quot;</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">//qDebug() &lt;&lt; elcLocation3D;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">//qDebug() &lt;&lt; elcLocation2D;</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">//qDebug() &lt;&lt; elcChannelNames;</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">//The positions read from the asa elc file do not correspond to a RAS coordinate system - use a simple 90° z transformation to fix this</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    Matrix3f rotation_z;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    rotation_z = AngleAxisf((<span class="keywordtype">float</span>)M_PI/2, Vector3f::UnitZ()); <span class="comment">//M_PI/2 = 90°</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    QVector3D center_pos;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;elcLocation3D.size(); i++)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        Vector3f point;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        point &lt;&lt; elcLocation3D[i][0], elcLocation3D[i][1] , elcLocation3D[i][2];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        Vector3f point_rot = rotation_z * point;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">//        cout&lt;&lt;&quot;point: &quot;&lt;&lt;endl&lt;&lt;point&lt;&lt;endl&lt;&lt;endl;</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">//        cout&lt;&lt;&quot;matrix: &quot;&lt;&lt;endl&lt;&lt;rotation_z&lt;&lt;endl&lt;&lt;endl;</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//        cout&lt;&lt;&quot;point_rot: &quot;&lt;&lt;endl&lt;&lt;point_rot&lt;&lt;endl&lt;&lt;endl;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">//        cout&lt;&lt;&quot;-----------------------------&quot;&lt;&lt;endl;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        elcLocation3D[i][0] = point_rot[0];</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        elcLocation3D[i][1] = point_rot[1];</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        elcLocation3D[i][2] = point_rot[2];</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="comment">//Also calculate the center position of the electrode positions in this for routine</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        center_pos.setX(center_pos.x() + elcLocation3D[i][0]);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        center_pos.setY(center_pos.y() + elcLocation3D[i][1]);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        center_pos.setZ(center_pos.z() + elcLocation3D[i][2]);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    center_pos.setX(center_pos.x()/elcLocation3D.size());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    center_pos.setY(center_pos.y()/elcLocation3D.size());</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    center_pos.setZ(center_pos.z()/elcLocation3D.size());</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">//Write electrode positions to the digitizer info in the fiffinfo</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    QList&lt;FiffDigPoint&gt; digitizerInfo;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">//Only write the EEG channel positions to the fiff info. The Refa devices have next to the EEG input channels 10 other input channels (Bipolar, Auxilary, Digital, Test)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">int</span> numberEEGCh;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span>(m_iNumberOfChannels&gt;128)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        numberEEGCh = 138 - (m_iNumberOfChannels-128);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        numberEEGCh = m_iNumberOfChannels;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">//Check if channel size by user corresponds with read channel informations from the elc file. If not append zeros and string &#39;unknown&#39; until the size matches.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span>(numberEEGCh &gt; elcLocation3D.size())</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        qDebug()&lt;&lt;<span class="stringliteral">&quot;Warning: setUpFiffInfo() - Not enough positions read from the elc file. Filling missing channel names and positions with zeroes and &#39;unknown&#39; strings.&quot;</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        QVector&lt;double&gt; tempA(3, 0.0);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        QVector&lt;double&gt; tempB(2, 0.0);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordtype">int</span> size = numberEEGCh-elcLocation3D.size();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;size; i++)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            elcLocation3D.push_back(tempA);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            elcLocation2D.push_back(tempB);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            elcChannelNames.append(QString(<span class="stringliteral">&quot;Unknown&quot;</span>));</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">//Append LAP value to digitizer data. Take location of LE2 electrode minus 1 cm as approximation.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html">FiffDigPoint</a> digPoint;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">int</span> indexLE2 = elcChannelNames.indexOf(<span class="stringliteral">&quot;LE2&quot;</span>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#aae75c4510085c461d6624158a0453c59">kind</a> = FIFFV_POINT_CARDINAL;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a849e835b867dfe73d3685227df6b1ac0">ident</a> = FIFFV_POINT_LPA;<span class="comment">//digitizerInfo.size();</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">//Set EEG electrode location - Convert from mm to m</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[0] = elcLocation3D[indexLE2][0]*0.001;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[1] = elcLocation3D[indexLE2][1]*0.001;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[2] = (elcLocation3D[indexLE2][2]-10)*0.001;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    digitizerInfo.push_back(digPoint);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">//Append nasion value to digitizer data. Take location of Z1 electrode minus 6 cm as approximation.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">int</span> indexZ1 = elcChannelNames.indexOf(<span class="stringliteral">&quot;Z1&quot;</span>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#aae75c4510085c461d6624158a0453c59">kind</a> = FIFFV_POINT_CARDINAL;<span class="comment">//FIFFV_POINT_NASION;</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a849e835b867dfe73d3685227df6b1ac0">ident</a> = FIFFV_POINT_NASION;<span class="comment">//digitizerInfo.size();</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">//Set EEG electrode location - Convert from mm to m</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[0] = elcLocation3D[indexZ1][0]*0.001;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[1] = elcLocation3D[indexZ1][1]*0.001;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[2] = (elcLocation3D[indexZ1][2]-60)*0.001;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    digitizerInfo.push_back(digPoint);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">//Append RAP value to digitizer data. Take location of RE2 electrode minus 1 cm as approximation.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">int</span> indexRE2 = elcChannelNames.indexOf(<span class="stringliteral">&quot;RE2&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#aae75c4510085c461d6624158a0453c59">kind</a> = FIFFV_POINT_CARDINAL;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a849e835b867dfe73d3685227df6b1ac0">ident</a> = FIFFV_POINT_RPA;<span class="comment">//digitizerInfo.size();</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">//Set EEG electrode location - Convert from mm to m</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[0] = elcLocation3D[indexRE2][0]*0.001;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[1] = elcLocation3D[indexRE2][1]*0.001;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[2] = (elcLocation3D[indexRE2][2]-10)*0.001;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    digitizerInfo.push_back(digPoint);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">//Add EEG electrode positions as digitizers</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;numberEEGCh; i++)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html">FiffDigPoint</a> digPoint;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#aae75c4510085c461d6624158a0453c59">kind</a> = FIFFV_POINT_EEG;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a849e835b867dfe73d3685227df6b1ac0">ident</a> = i;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">//Set EEG electrode location - Convert from mm to m</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[0] = elcLocation3D[i][0]*0.001;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[1] = elcLocation3D[i][1]*0.001;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        digPoint.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">r</a>[2] = elcLocation3D[i][2]*0.001;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        digitizerInfo.push_back(digPoint);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">//Set the final digitizer values to the fiff info</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    m_pFiffInfo-&gt;dig = digitizerInfo;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">//Set up the channel info</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    QStringList QSLChNames;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    m_pFiffInfo-&gt;chs.clear();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;m_iNumberOfChannels; i++)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="comment">//Create information for each channel</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        QString sChType;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html">FiffChInfo</a> fChInfo;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">//EEG Channels</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span>(i&lt;=numberEEGCh-1)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="comment">//Set channel name</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="comment">//fChInfo.ch_name = elcChannelNames.at(i);</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            sChType = QString(<span class="stringliteral">&quot;EEG &quot;</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">if</span>(i&lt;10)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                sChType.append(<span class="stringliteral">&quot;00&quot;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">if</span>(i&gt;=10 &amp;&amp; i&lt;100)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                sChType.append(<span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#ab3cf2e116d285cdab2313b9adb9ee3bd">ch_name</a> = sChType.append(sChType.number(i));</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="comment">//Set channel type</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a57296252392fa2bb85f00bf4cb0454f6">kind</a> = FIFFV_EEG_CH;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="comment">//Set coil type</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#aa6c5dd28c8c0d442aeb073188785185b">coil_type</a> = <a class="code" href="fiff__constants_8h.html#af1b2a7f578f916bcc94862fa0d2b8d1d">FIFFV_COIL_EEG</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="comment">//Set logno</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#adfd09432afc7dd7c475413d941d30eab">logno</a> = i;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="comment">//Set coord frame</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#adc4ceed70642eaf96e92eed073737b74">coord_frame</a> = FIFFV_COORD_HEAD;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="comment">//Set unit</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a5e79cf6d8e0efa7e5f17b146d4895465">unit</a> = FIFF_UNIT_V;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a9d718bd3658c1519a1b22214049b7f9f">unit_mul</a> = 0;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="comment">//Set EEG electrode location - Convert from mm to m</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">eeg_loc</a>(0,0) = elcLocation3D[i][0]*0.001;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">eeg_loc</a>(1,0) = elcLocation3D[i][1]*0.001;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">eeg_loc</a>(2,0) = elcLocation3D[i][2]*0.001;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="comment">//Set EEG electrode direction - Convert from mm to m</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">eeg_loc</a>(0,1) = center_pos.x()*0.001;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">eeg_loc</a>(1,1) = center_pos.y()*0.001;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">eeg_loc</a>(2,1) = center_pos.z()*0.001;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="comment">//Also write the eeg electrode locations into the meg loc variable (mne_ex_read_raw() matlab function wants this)</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(0,0) = elcLocation3D[i][0]*0.001;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(1,0) = elcLocation3D[i][1]*0.001;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(2,0) = elcLocation3D[i][2]*0.001;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(3,0) = center_pos.x()*0.001;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(4,0) = center_pos.y()*0.001;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(5,0) = center_pos.z()*0.001;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(6,0) = 0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(7,0) = 1;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(8,0) = 0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(9,0) = 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(10,0) = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">loc</a>(11,0) = 1;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="comment">//cout&lt;&lt;i&lt;&lt;endl&lt;&lt;fChInfo.eeg_loc&lt;&lt;endl;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="comment">//Bipolar channels</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span>(i&gt;=128 &amp;&amp; i&lt;=131)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="comment">//Set channel type</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a57296252392fa2bb85f00bf4cb0454f6">kind</a> = FIFFV_MISC_CH;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            sChType = QString(<span class="stringliteral">&quot;BIPO &quot;</span>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#ab3cf2e116d285cdab2313b9adb9ee3bd">ch_name</a> = sChType.append(sChType.number(i-128));</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">//Auxilary input channels</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span>(i&gt;=132 &amp;&amp; i&lt;=135)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="comment">//Set channel type</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a57296252392fa2bb85f00bf4cb0454f6">kind</a> = FIFFV_MISC_CH;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            sChType = QString(<span class="stringliteral">&quot;AUX &quot;</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#ab3cf2e116d285cdab2313b9adb9ee3bd">ch_name</a> = sChType.append(sChType.number(i-132));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">//Digital input channel</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">if</span>(i==136)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="comment">//Set channel type</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a57296252392fa2bb85f00bf4cb0454f6">kind</a> = FIFFV_STIM_CH;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            sChType = QString(<span class="stringliteral">&quot;STI 014&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#ab3cf2e116d285cdab2313b9adb9ee3bd">ch_name</a> = sChType;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">//Internally generated test signal - ramp signal</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span>(i==137)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="comment">//Set channel type</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a57296252392fa2bb85f00bf4cb0454f6">kind</a> = FIFFV_MISC_CH;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            sChType = QString(<span class="stringliteral">&quot;TEST RAMP&quot;</span>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            fChInfo.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#ab3cf2e116d285cdab2313b9adb9ee3bd">ch_name</a> = sChType;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        QSLChNames &lt;&lt; sChType;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        m_pFiffInfo-&gt;chs.append(fChInfo);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">//Set channel names in fiff_info_base</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    m_pFiffInfo-&gt;ch_names = QSLChNames;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">//Set head projection</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    m_pFiffInfo-&gt;dev_head_t.from = FIFFV_COORD_DEVICE;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    m_pFiffInfo-&gt;dev_head_t.to = FIFFV_COORD_HEAD;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    m_pFiffInfo-&gt;ctf_head_t.from = FIFFV_COORD_DEVICE;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    m_pFiffInfo-&gt;ctf_head_t.to = FIFFV_COORD_HEAD;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">//Set projection data</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    m_pFiffInfo-&gt;projs.clear();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html">FiffProj</a> proj;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a02031295a2d7618ff26fd39965406afe">kind</a> = 1;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#aa5593133aaf0bde0ac5c5c18685a14d1">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_named_matrix.html#a013471cfe5f75de645b42e1bc71f0651">FiffNamedMatrix::SDPtr</a> namedMatrix = proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a01a8b9aef8636730c851226a12dce03e">data</a>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    namedMatrix-&gt;ncol = numberEEGCh/3;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    namedMatrix-&gt;nrow = 1;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    namedMatrix-&gt;data = MatrixXd::Ones(1, namedMatrix-&gt;ncol);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">//Set projection 1</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;namedMatrix-&gt;ncol; i++)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        namedMatrix-&gt;col_names &lt;&lt; QSLChNames.at(i);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a01a8b9aef8636730c851226a12dce03e">data</a> = namedMatrix;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a461ef684d1ef47740f56b4c1b0e84181">desc</a> = QString(<span class="stringliteral">&quot;PCA-v1&quot;</span>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    m_pFiffInfo-&gt;projs.append(proj);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">//Set projection 2</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    namedMatrix-&gt;col_names.clear();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;namedMatrix-&gt;ncol; i++)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        namedMatrix-&gt;col_names &lt;&lt; QSLChNames.at(i+namedMatrix-&gt;ncol);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a01a8b9aef8636730c851226a12dce03e">data</a> = namedMatrix;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a461ef684d1ef47740f56b4c1b0e84181">desc</a> = QString(<span class="stringliteral">&quot;PCA-v2&quot;</span>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    m_pFiffInfo-&gt;projs.append(proj);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">//Set projection 3</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    namedMatrix-&gt;col_names.clear();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;namedMatrix-&gt;ncol; i++)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        namedMatrix-&gt;col_names &lt;&lt; QSLChNames.at(i+(2*namedMatrix-&gt;ncol));</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a01a8b9aef8636730c851226a12dce03e">data</a> = namedMatrix;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    proj.<a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a461ef684d1ef47740f56b4c1b0e84181">desc</a> = QString(<span class="stringliteral">&quot;PCA-v3&quot;</span>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    m_pFiffInfo-&gt;projs.append(proj);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ab8fef3199ea9d4e37ca8a4ce715cae16">  447</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ab8fef3199ea9d4e37ca8a4ce715cae16">TMSI::start</a>()</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">//Check if the thread is already or still running. This can happen if the start button is pressed immediately after the stop button was pressed. In this case the stopping process is not finished yet but the start process is initiated.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span>(this-&gt;isRunning())</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        QThread::wait();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span>(m_bBeepTrigger)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        m_qTimerTrigger.start();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">//Setup writing to file</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span>(m_bWriteToFile)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment">//Initiate the stream for writing to the fif file</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        m_fileOut.setFileName(m_sOutputFilePath);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span>(m_fileOut.exists())</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            QMessageBox msgBox;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            msgBox.setText(<span class="stringliteral">&quot;The file you want to write already exists.&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            msgBox.setInformativeText(<span class="stringliteral">&quot;Do you want to overwrite this file?&quot;</span>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            msgBox.setStandardButtons(QMessageBox::Yes | QMessageBox::No);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordtype">int</span> ret = msgBox.exec();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span>(ret == QMessageBox::No)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#aad5595b85f4d3d371d4d6ccddebe5719">setUpFiffInfo</a>();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        m_pOutfid = <a class="code" href="class_f_i_f_f_l_i_b_1_1_fiff.html#a741c3560633571cb467475523fa2a1ca">Fiff::start_writing_raw</a>(m_fileOut, *m_pFiffInfo, m_cals);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        fiff_int_t first = 0;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        m_pOutfid-&gt;write_int(FIFF_FIRST_SAMPLE, &amp;first);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#aad5595b85f4d3d371d4d6ccddebe5719">setUpFiffInfo</a>();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">//Set the channel size of the RMTSA - this needs to be done here and NOT in the init() function because the user can change the number of channels during runtime</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    m_pRMTSA_TMSI-&gt;data()-&gt;initFromFiffInfo(m_pFiffInfo);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    m_pRMTSA_TMSI-&gt;data()-&gt;setMultiArraySize(m_iSamplesPerBlock);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    m_pRMTSA_TMSI-&gt;data()-&gt;setSamplingRate(m_iSamplingFreq);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">//Buffer</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    m_pRawMatrixBuffer_In = QSharedPointer&lt;RawMatrixBuffer&gt;(<span class="keyword">new</span> RawMatrixBuffer(8, m_iNumberOfChannels, m_iSamplesPerBlock));</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    m_pTMSIProducer-&gt;start(m_iNumberOfChannels,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                       m_iSamplingFreq,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                       m_iSamplesPerBlock,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                       m_bUseChExponent,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                       m_bUseUnitGain,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                       m_bUseUnitOffset,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                       m_bWriteDriverDebugToFile,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                       m_sOutputFilePath,</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                       m_bUseCommonAverage);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span>(m_pTMSIProducer-&gt;isRunning())</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment">// Init BCIFeatureWindow for visualization</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span>(m_bUseKeyboardTrigger)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            m_tmsiManualAnnotationWidget = QSharedPointer&lt;TMSIManualAnnotationWidget&gt;(<span class="keyword">new</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i_manual_annotation_widget.html">TMSIManualAnnotationWidget</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            m_tmsiManualAnnotationWidget-&gt;initGui();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            m_tmsiManualAnnotationWidget-&gt;show();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        m_bIsRunning = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        QThread::start();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        qWarning() &lt;&lt; <span class="stringliteral">&quot;Plugin TMSI - ERROR - TMSIProducer thread could not be started - Either the device is turned off (check your OS device manager) or the driver DLL (TMSiSDK.dll / TMSiSDK32bit.dll) is not installed in the system32 / SysWOW64 directory&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af9a3f343b5d13c3d899f79789088a30b">  523</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af9a3f343b5d13c3d899f79789088a30b">TMSI::stop</a>()</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">//Stop the producer thread first</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    m_pTMSIProducer-&gt;stop();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">//Wait until this thread (TMSI) is stopped</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    m_bIsRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">//In case the semaphore blocks the thread -&gt; Release the QSemaphore and let it exit from the pop function (acquire statement)</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    m_pRawMatrixBuffer_In-&gt;releaseFromPop();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    m_pRawMatrixBuffer_In-&gt;clear();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    m_pRMTSA_TMSI-&gt;data()-&gt;clear();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    m_tmsiManualAnnotationWidget-&gt;hide();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#afa5304eb23df9a91695c9df894a276de">  546</a></span>&#160;<a class="code" href="class_m_n_e_x_1_1_i_plugin.html#a9bc9c5236c0160850e64cea0f9367f1e">IPlugin::PluginType</a> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#afa5304eb23df9a91695c9df894a276de">TMSI::getType</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_m_n_e_x_1_1_i_plugin.html#a9bc9c5236c0160850e64cea0f9367f1ea6ef97eff3760b2e561e078c233844ed8">_ISensor</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a1b51d02bd09d823b8fb4915973d14b46">  554</a></span>&#160;QString <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a1b51d02bd09d823b8fb4915973d14b46">TMSI::getName</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;TMSI EEG&quot;</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ae647f94bf4f12e551cc86ebe2d85f18c">  562</a></span>&#160;QWidget* <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ae647f94bf4f12e551cc86ebe2d85f18c">TMSI::setupWidget</a>()</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;{</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget.html">TMSISetupWidget</a>* widget = <span class="keyword">new</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget.html">TMSISetupWidget</a>(<span class="keyword">this</span>);<span class="comment">//widget is later destroyed by CentralWidget - so it has to be created everytime new</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">//init properties dialog</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    widget-&gt;<a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget.html#ada7d948bbd5e8cc5e0dd8e6fdcab4333">initGui</a>();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> widget;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="keywordtype">void</span> TMSI::setKeyboardTriggerType(<span class="keywordtype">int</span> type)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;{</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    m_qMutex.lock();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        m_iTriggerType =type;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    m_qMutex.unlock();</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">//*************************************************************************************************************</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a28a9f470d84220f0933989c5dd034853">  585</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a28a9f470d84220f0933989c5dd034853">TMSI::run</a>()</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;{</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">while</span>(m_bIsRunning)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment">//std::cout&lt;&lt;&quot;TMSI::run(s)&quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="comment">//pop matrix only if the producer thread is running</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">if</span>(m_pTMSIProducer-&gt;isRunning())</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            MatrixXf matValue = m_pRawMatrixBuffer_In-&gt;pop();</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="comment">// Set Beep trigger (if activated)</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">if</span>(m_bBeepTrigger &amp;&amp; m_qTimerTrigger.elapsed() &gt;= m_iTriggerInterval)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                QFuture&lt;void&gt; future = QtConcurrent::run(Beep, 450, 700);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="comment">//Set trigger in received data samples - just for one sample, so that this event is easy to detect</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                matValue(136, m_iSamplesPerBlock-1) = 252;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                m_qTimerTrigger.restart();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                Q_UNUSED(future);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="comment">// Set keyboard trigger (if activated and !=0)</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">if</span>(m_bUseKeyboardTrigger &amp;&amp; m_iTriggerType!=0)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                matValue(136, m_iSamplesPerBlock-1) = m_iTriggerType;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="comment">//Write raw data to fif file</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span>(m_bWriteToFile)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                m_pOutfid-&gt;write_raw_buffer(matValue.cast&lt;<span class="keywordtype">double</span>&gt;(), m_cals);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="comment">// TODO: Use preprocessing if wanted by the user</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">if</span>(m_bUseFiltering)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                MatrixXf temp = matValue;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                matValue = matValue - m_matOldMatrix;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                m_matOldMatrix = temp;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="comment">//    //Check filter class - will be removed in the future - testing purpose only!</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="comment">//    FilterTools* filterObject = new FilterTools();</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="comment">//    //kaiser window testing</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="comment">//    qint32 numberCoeff = 51;</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="comment">//    QVector&lt;float&gt; impulseResponse(numberCoeff);</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <span class="comment">//    filterObject-&gt;createDynamicFilter(QString(&#39;LP&#39;), numberCoeff, (float)0.3, impulseResponse);</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                <span class="comment">//    ofstream outputFileStream(&quot;mne_x_plugins/resources/tmsi/filterToolsTest.txt&quot;, ios::out);</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                <span class="comment">//    outputFileStream &lt;&lt; &quot;impulseResponse:\n&quot;;</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="comment">//    for(int i=0; i&lt;impulseResponse.size(); i++)</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="comment">//        outputFileStream &lt;&lt; impulseResponse[i] &lt;&lt; &quot; &quot;;</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="comment">//    outputFileStream &lt;&lt; endl;</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="comment">//    //convolution testing</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <span class="comment">//    QVector&lt;float&gt; in (12, 2);</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="comment">//    QVector&lt;float&gt; kernel (4, 2);</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="comment">//    QVector&lt;float&gt; out = filterObject-&gt;convolve(in, kernel);</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="comment">//    outputFileStream &lt;&lt; &quot;convolution result:\n&quot;;</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="comment">//    for(int i=0; i&lt;out.size(); i++)</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="comment">//        outputFileStream &lt;&lt; out[i] &lt;&lt; &quot; &quot;;</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <span class="comment">//    outputFileStream &lt;&lt; endl;</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="comment">// TODO: Perform a fft if wanted by the user</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="keywordflow">if</span>(m_bUseFFT)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                QElapsedTimer timer;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                timer.start();</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                FFT&lt;float&gt; fft;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                Matrix&lt;complex&lt;float&gt;, 138, 16&gt; freq;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <span class="keywordflow">for</span>(qint32 i = 0; i &lt; matValue.rows(); ++i)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    fft.fwd(freq.row(i), matValue.row(i));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">//                cout&lt;&lt;&quot;FFT postprocessing done in &quot;&lt;&lt;timer.nsecsElapsed()&lt;&lt;&quot; nanosec&quot;&lt;&lt;endl;</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">//                cout&lt;&lt;&quot;matValue before FFT:&quot;&lt;&lt;endl&lt;&lt;matValue&lt;&lt;endl;</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">//                cout&lt;&lt;&quot;freq after FFT:&quot;&lt;&lt;endl&lt;&lt;freq&lt;&lt;endl;</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">//                matValue = freq.cwiseAbs();</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">//                cout&lt;&lt;&quot;matValue after FFT:&quot;&lt;&lt;endl&lt;&lt;matValue&lt;&lt;endl;</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="comment">//Change values of the trigger channel for better plotting - this change is not saved in the produced fif file</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordflow">if</span>(m_iNumberOfChannels&gt;137)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;matValue.row(137).cols(); i++)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    <span class="comment">// Left keyboard or capacitive</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    <span class="keywordflow">if</span>(matValue.row(136)[i] == 254)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                        matValue.row(136)[i] = 4000;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    <span class="comment">// Right keyboard</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    <span class="keywordflow">if</span>(matValue.row(136)[i] == 253)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                        matValue.row(136)[i] = 8000;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    <span class="comment">// Beep</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    <span class="keywordflow">if</span>(matValue.row(136)[i] == 252)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                        matValue.row(136)[i] = 2000;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="comment">//emit values to real time multi sample array</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            <span class="keywordflow">for</span>(qint32 i = 0; i &lt; matValue.cols(); ++i)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                m_pRMTSA_TMSI-&gt;data()-&gt;setValue(matValue.col(i).cast&lt;<span class="keywordtype">double</span>&gt;());</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <span class="comment">// Reset keyboard trigger</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            m_iTriggerType = 0;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">//Close the fif output stream</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span>(m_bWriteToFile)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        m_pOutfid-&gt;finish_writing_raw();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">//std::cout&lt;&lt;&quot;EXITING - TMSI::run()&quot;&lt;&lt;std::endl;</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_dig_point_html_a64b69cce614706909a1def619cc150aa"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a64b69cce614706909a1def619cc150aa">FIFFLIB::FiffDigPoint::r</a></div><div class="ttdeci">fiff_float_t r[3]</div><div class="ttdef"><b>Definition:</b> <a href="fiff__dig__point_8h_source.html#l00113">fiff_dig_point.h:113</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_ab8fef3199ea9d4e37ca8a4ce715cae16"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ab8fef3199ea9d4e37ca8a4ce715cae16">TMSIPlugin::TMSI::start</a></div><div class="ttdeci">virtual bool start()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00447">tmsi.cpp:447</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_manual_annotation_widget_html"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i_manual_annotation_widget.html">TMSIPlugin::TMSIManualAnnotationWidget</a></div><div class="ttdoc">The TMSIManualAnnotationWidget class provides a widget/window for manually annotating the trigger...</div><div class="ttdef"><b>Definition:</b> <a href="tmsimanualannotationwidget_8h_source.html#l00078">tmsimanualannotationwidget.h:78</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_producer_html"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i_producer.html">TMSIPlugin::TMSIProducer</a></div><div class="ttdoc">The EEGProducer class provides a EEG data producer for a given sampling rate. </div><div class="ttdef"><b>Definition:</b> <a href="tmsiproducer_8h_source.html#l00089">tmsiproducer.h:89</a></div></div>
<div class="ttc" id="class_m_n_e_x_1_1_i_plugin_html_a9bc9c5236c0160850e64cea0f9367f1e"><div class="ttname"><a href="class_m_n_e_x_1_1_i_plugin.html#a9bc9c5236c0160850e64cea0f9367f1e">MNEX::IPlugin::PluginType</a></div><div class="ttdeci">PluginType</div><div class="ttdef"><b>Definition:</b> <a href="_i_plugin_8h_source.html#l00100">IPlugin.h:100</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_info_html"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_info.html">FIFFLIB::FiffInfo</a></div><div class="ttdoc">FIFF measurement file information. </div><div class="ttdef"><b>Definition:</b> <a href="fiff__info_8h_source.html#l00096">fiff_info.h:96</a></div></div>
<div class="ttc" id="class_m_n_e_x_1_1_i_plugin_html_a9ab1fe463c2984418c495fafe96d6f84"><div class="ttname"><a href="class_m_n_e_x_1_1_i_plugin.html#a9ab1fe463c2984418c495fafe96d6f84">MNEX::IPlugin::m_outputConnectors</a></div><div class="ttdeci">OutputConnectorList m_outputConnectors</div><div class="ttdef"><b>Definition:</b> <a href="_i_plugin_8h_source.html#l00216">IPlugin.h:216</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_a1b51d02bd09d823b8fb4915973d14b46"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a1b51d02bd09d823b8fb4915973d14b46">TMSIPlugin::TMSI::getName</a></div><div class="ttdeci">virtual QString getName() const </div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00554">tmsi.cpp:554</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_proj_html_a02031295a2d7618ff26fd39965406afe"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a02031295a2d7618ff26fd39965406afe">FIFFLIB::FiffProj::kind</a></div><div class="ttdeci">fiff_int_t kind</div><div class="ttdef"><b>Definition:</b> <a href="fiff__proj_8h_source.html#l00164">fiff_proj.h:164</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_dig_point_html"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html">FIFFLIB::FiffDigPoint</a></div><div class="ttdoc">Digitization point description. </div><div class="ttdef"><b>Definition:</b> <a href="fiff__dig__point_8h_source.html#l00076">fiff_dig_point.h:76</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_html_a741c3560633571cb467475523fa2a1ca"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff.html#a741c3560633571cb467475523fa2a1ca">FIFFLIB::Fiff::start_writing_raw</a></div><div class="ttdeci">static FiffStream::SPtr start_writing_raw(QIODevice &amp;p_IODevice, const FiffInfo &amp;info, MatrixXd &amp;cals, MatrixXi sel=defaultMatrixXi)</div><div class="ttdef"><b>Definition:</b> <a href="fiff_8h_source.html#l00695">fiff.h:695</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_named_matrix_html_a013471cfe5f75de645b42e1bc71f0651"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_named_matrix.html#a013471cfe5f75de645b42e1bc71f0651">FIFFLIB::FiffNamedMatrix::SDPtr</a></div><div class="ttdeci">QSharedDataPointer&lt; FiffNamedMatrix &gt; SDPtr</div><div class="ttdef"><b>Definition:</b> <a href="fiff__named__matrix_8h_source.html#l00099">fiff_named_matrix.h:99</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_a28a9f470d84220f0933989c5dd034853"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a28a9f470d84220f0933989c5dd034853">TMSIPlugin::TMSI::run</a></div><div class="ttdeci">virtual void run()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00585">tmsi.cpp:585</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_af9a3f343b5d13c3d899f79789088a30b"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af9a3f343b5d13c3d899f79789088a30b">TMSIPlugin::TMSI::stop</a></div><div class="ttdeci">virtual bool stop()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00523">tmsi.cpp:523</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_afa5304eb23df9a91695c9df894a276de"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#afa5304eb23df9a91695c9df894a276de">TMSIPlugin::TMSI::getType</a></div><div class="ttdeci">virtual IPlugin::PluginType getType() const </div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00546">tmsi.cpp:546</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget_html"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget.html">TMSIPlugin::TMSISetupWidget</a></div><div class="ttdoc">The TMSISetupWidget class provides the TMSI configuration window. </div><div class="ttdef"><b>Definition:</b> <a href="tmsisetupwidget_8h_source.html#l00079">tmsisetupwidget.h:79</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget_html_ada7d948bbd5e8cc5e0dd8e6fdcab4333"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i_setup_widget.html#ada7d948bbd5e8cc5e0dd8e6fdcab4333">TMSIPlugin::TMSISetupWidget::initGui</a></div><div class="ttdeci">void initGui()</div><div class="ttdef"><b>Definition:</b> <a href="tmsisetupwidget_8cpp_source.html#l00147">tmsisetupwidget.cpp:147</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_a3ed500b9d8fd1d825c9ee72ce717952e"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a3ed500b9d8fd1d825c9ee72ce717952e">TMSIPlugin::TMSI::init</a></div><div class="ttdeci">virtual void init()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00101">tmsi.cpp:101</a></div></div>
<div class="ttc" id="fiff__constants_8h_html_af1b2a7f578f916bcc94862fa0d2b8d1d"><div class="ttname"><a href="fiff__constants_8h.html#af1b2a7f578f916bcc94862fa0d2b8d1d">FIFFV_COIL_EEG</a></div><div class="ttdeci">#define FIFFV_COIL_EEG</div><div class="ttdef"><b>Definition:</b> <a href="fiff__constants_8h_source.html#l00179">fiff_constants.h:179</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_dig_point_html_aae75c4510085c461d6624158a0453c59"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#aae75c4510085c461d6624158a0453c59">FIFFLIB::FiffDigPoint::kind</a></div><div class="ttdeci">fiff_int_t kind</div><div class="ttdef"><b>Definition:</b> <a href="fiff__dig__point_8h_source.html#l00111">fiff_dig_point.h:111</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_proj_html_a01a8b9aef8636730c851226a12dce03e"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a01a8b9aef8636730c851226a12dce03e">FIFFLIB::FiffProj::data</a></div><div class="ttdeci">FiffNamedMatrix::SDPtr data</div><div class="ttdef"><b>Definition:</b> <a href="fiff__proj_8h_source.html#l00168">fiff_proj.h:168</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_aad5595b85f4d3d371d4d6ccddebe5719"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#aad5595b85f4d3d371d4d6ccddebe5719">TMSIPlugin::TMSI::setUpFiffInfo</a></div><div class="ttdeci">void setUpFiffInfo()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00139">tmsi.cpp:139</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_proj_html"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html">FIFFLIB::FiffProj</a></div><div class="ttdoc">SSP projector data. </div><div class="ttdef"><b>Definition:</b> <a href="fiff__proj_8h_source.html#l00089">fiff_proj.h:89</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_a9d718bd3658c1519a1b22214049b7f9f"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a9d718bd3658c1519a1b22214049b7f9f">FIFFLIB::FiffChInfo::unit_mul</a></div><div class="ttdeci">fiff_int_t unit_mul</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00142">fiff_ch_info.h:142</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_adfd09432afc7dd7c475413d941d30eab"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#adfd09432afc7dd7c475413d941d30eab">FIFFLIB::FiffChInfo::logno</a></div><div class="ttdeci">fiff_int_t logno</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00123">fiff_ch_info.h:123</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_a57296252392fa2bb85f00bf4cb0454f6"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a57296252392fa2bb85f00bf4cb0454f6">FIFFLIB::FiffChInfo::kind</a></div><div class="ttdeci">fiff_int_t kind</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00124">fiff_ch_info.h:124</a></div></div>
<div class="ttc" id="class_u_t_i_l_s_l_i_b_1_1_as_a_elc_html"><div class="ttname"><a href="class_u_t_i_l_s_l_i_b_1_1_as_a_elc.html">UTILSLIB::AsAElc</a></div><div class="ttdoc">Processes AsA .elc files which contain the electrode positions of a EEG hat. </div><div class="ttdef"><b>Definition:</b> <a href="asaelc_8h_source.html#l00098">asaelc.h:98</a></div></div>
<div class="ttc" id="tmsi_8h_html"><div class="ttname"><a href="tmsi_8h.html">tmsi.h</a></div><div class="ttdoc">Contains the declaration of the TMSI class. </div></div>
<div class="ttc" id="class_m_n_e_x_1_1_i_plugin_html_a9bc9c5236c0160850e64cea0f9367f1ea6ef97eff3760b2e561e078c233844ed8"><div class="ttname"><a href="class_m_n_e_x_1_1_i_plugin.html#a9bc9c5236c0160850e64cea0f9367f1ea6ef97eff3760b2e561e078c233844ed8">MNEX::IPlugin::_ISensor</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_plugin_8h_source.html#l00102">IPlugin.h:102</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html">FIFFLIB::FiffChInfo</a></div><div class="ttdoc">Channel info descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00087">fiff_ch_info.h:87</a></div></div>
<div class="ttc" id="class_u_t_i_l_s_l_i_b_1_1_as_a_elc_html_affa1d3af83b8a7ab40d8842c30124df5"><div class="ttname"><a href="class_u_t_i_l_s_l_i_b_1_1_as_a_elc.html#affa1d3af83b8a7ab40d8842c30124df5">UTILSLIB::AsAElc::readElcFile</a></div><div class="ttdeci">bool readElcFile(QString path, QStringList &amp;channelNames, QVector&lt; QVector&lt; double &gt; &gt; &amp;location3D, QVector&lt; QVector&lt; double &gt; &gt; &amp;location2D, QString &amp;unit)</div><div class="ttdef"><b>Definition:</b> <a href="asaelc_8cpp_source.html#l00065">asaelc.cpp:65</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_adc4ceed70642eaf96e92eed073737b74"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#adc4ceed70642eaf96e92eed073737b74">FIFFLIB::FiffChInfo::coord_frame</a></div><div class="ttdeci">fiff_int_t coord_frame</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00137">fiff_ch_info.h:137</a></div></div>
<div class="ttc" id="class_m_n_e_x_1_1_plugin_output_data_html_a52a436ad77f0236e54e737665bf038f6"><div class="ttname"><a href="class_m_n_e_x_1_1_plugin_output_data.html#a52a436ad77f0236e54e737665bf038f6">MNEX::PluginOutputData::create</a></div><div class="ttdeci">static QSharedPointer&lt; PluginOutputData&lt; T &gt; &gt; create(IPlugin *parent, const QString &amp;name, const QString &amp;descr)</div><div class="ttdef"><b>Definition:</b> <a href="pluginoutputdata_8h_source.html#l00126">pluginoutputdata.h:126</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_dig_point_html_a849e835b867dfe73d3685227df6b1ac0"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_dig_point.html#a849e835b867dfe73d3685227df6b1ac0">FIFFLIB::FiffDigPoint::ident</a></div><div class="ttdeci">fiff_int_t ident</div><div class="ttdef"><b>Definition:</b> <a href="fiff__dig__point_8h_source.html#l00112">fiff_dig_point.h:112</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_ab3cf2e116d285cdab2313b9adb9ee3bd"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#ab3cf2e116d285cdab2313b9adb9ee3bd">FIFFLIB::FiffChInfo::ch_name</a></div><div class="ttdeci">QString ch_name</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00143">fiff_ch_info.h:143</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_af05f662f0cf7db2650b4322049e8d640"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#af05f662f0cf7db2650b4322049e8d640">TMSIPlugin::TMSI::TMSI</a></div><div class="ttdeci">TMSI()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00069">tmsi.cpp:69</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_aa6c5dd28c8c0d442aeb073188785185b"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#aa6c5dd28c8c0d442aeb073188785185b">FIFFLIB::FiffChInfo::coil_type</a></div><div class="ttdeci">fiff_int_t coil_type</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00128">fiff_ch_info.h:128</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_proj_html_aa5593133aaf0bde0ac5c5c18685a14d1"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#aa5593133aaf0bde0ac5c5c18685a14d1">FIFFLIB::FiffProj::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="fiff__proj_8h_source.html#l00165">fiff_proj.h:165</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_a8d0f25ed69750580b56814407b8c204b"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a8d0f25ed69750580b56814407b8c204b">FIFFLIB::FiffChInfo::eeg_loc</a></div><div class="ttdeci">Matrix&lt; double, 3, 2, DontAlign &gt; eeg_loc</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00136">fiff_ch_info.h:136</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_a5e79cf6d8e0efa7e5f17b146d4895465"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a5e79cf6d8e0efa7e5f17b146d4895465">FIFFLIB::FiffChInfo::unit</a></div><div class="ttdeci">fiff_int_t unit</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00141">fiff_ch_info.h:141</a></div></div>
<div class="ttc" id="tmsiproducer_8h_html"><div class="ttname"><a href="tmsiproducer_8h.html">tmsiproducer.h</a></div><div class="ttdoc">Contains the declaration of the TMSIProducer class. </div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_ae647f94bf4f12e551cc86ebe2d85f18c"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ae647f94bf4f12e551cc86ebe2d85f18c">TMSIPlugin::TMSI::setupWidget</a></div><div class="ttdeci">virtual QWidget * setupWidget()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00562">tmsi.cpp:562</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_ab4d4fa2c0d3dbdb594db1c1edb5f6c93"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#ab4d4fa2c0d3dbdb594db1c1edb5f6c93">TMSIPlugin::TMSI::clone</a></div><div class="ttdeci">virtual QSharedPointer&lt; IPlugin &gt; clone() const </div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00092">tmsi.cpp:92</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_ch_info_html_a86a15b1f849599c2dae3dc2b976d03c2"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_ch_info.html#a86a15b1f849599c2dae3dc2b976d03c2">FIFFLIB::FiffChInfo::loc</a></div><div class="ttdeci">Matrix&lt; double, 12, 1, DontAlign &gt; loc</div><div class="ttdef"><b>Definition:</b> <a href="fiff__ch__info_8h_source.html#l00130">fiff_ch_info.h:130</a></div></div>
<div class="ttc" id="class_f_i_f_f_l_i_b_1_1_fiff_proj_html_a461ef684d1ef47740f56b4c1b0e84181"><div class="ttname"><a href="class_f_i_f_f_l_i_b_1_1_fiff_proj.html#a461ef684d1ef47740f56b4c1b0e84181">FIFFLIB::FiffProj::desc</a></div><div class="ttdeci">QString desc</div><div class="ttdef"><b>Definition:</b> <a href="fiff__proj_8h_source.html#l00166">fiff_proj.h:166</a></div></div>
<div class="ttc" id="class_t_m_s_i_plugin_1_1_t_m_s_i_html_a0e87eb5c7f6232c29123e40099897c6b"><div class="ttname"><a href="class_t_m_s_i_plugin_1_1_t_m_s_i.html#a0e87eb5c7f6232c29123e40099897c6b">TMSIPlugin::TMSI::~TMSI</a></div><div class="ttdeci">virtual ~TMSI()</div><div class="ttdef"><b>Definition:</b> <a href="tmsi_8cpp_source.html#l00080">tmsi.cpp:80</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 14 2014 23:18:18 for MNE-CPP by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
